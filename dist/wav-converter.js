!function(t){var r={};function e(n){if(r[n])return r[n].exports;var o=r[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,e),o.l=!0,o.exports}e.m=t,e.c=r,e.d=function(t,r,n){e.o(t,r)||Object.defineProperty(t,r,{enumerable:!0,get:n})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,r){if(1&r&&(t=e(t)),8&r)return t;if(4&r&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(e.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&r&&"string"!=typeof t)for(var o in t)e.d(n,o,function(r){return t[r]}.bind(null,o));return n},e.n=function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(r,"a",r),r},e.o=function(t,r){return Object.prototype.hasOwnProperty.call(t,r)},e.p="",e(e.s=8)}({0:function(t,r,e){"use strict";function n(t){return new Promise((function(r){var e=new FileReader;e.onload=function(){r(e.result)},e.readAsDataURL(t)}))}function o(t){return new Promise((function(r){var e=new FileReader;e.onload=function(){r(e.result)},e.readAsArrayBuffer(t)}))}function i(t){return t.replace(/И\u0306/g,"Й").replace(/и\u0306/g,"й").replace(/Е\u0308/g,"Ё").replace(/е\u0308/g,"ё")}function a(t,r){var e=new Blob([r],{type:"application/octet-stream"});if(window.navigator&&window.navigator.msSaveOrOpenBlob)window.navigator.msSaveOrOpenBlob(e,t);else{var n=URL.createObjectURL(e),o=document.createElement("a");o.href=n,o.download=t,document.body.appendChild(o),o.click(),URL.revokeObjectURL(n),document.body.removeChild(o)}}e.d(r,"c",(function(){return n})),e.d(r,"b",(function(){return o})),e.d(r,"a",(function(){return i})),e.d(r,"d",(function(){return a}))},1:function(t,r,e){"use strict";Uint8Array.prototype.slice||Object.defineProperty(Uint8Array.prototype,"slice",{value:function(t,r){return new Uint8Array(Array.prototype.slice.call(this,t,r))}});var n=function(){function t(t,r){var e=(void 0===r?{}:r).expandBytes,n=void 0===e?256:e;this._data=new Uint8Array(t),this._length=this._data.length,this._expandBytes=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this._length},enumerable:!0,configurable:!0}),t.prototype.getByte=function(t){return this._data[t]},t.prototype.setByte=function(t,r){return this._data[t]=r,this},t.prototype.push=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return this.pushArray(t,!1)},t.prototype.pushOnce=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return this.pushArray(t,!0)},t.prototype.pushArray=function(t,r){var e=new Uint8Array(t),n=this._data;if(this._length+e.length>n.length){var o=r||e.length>this._expandBytes?e.length:this._expandBytes;(n=new Uint8Array(this._length+o)).set(this._data),this._data=n}return n.set(e,this._length),this._length+=e.length,this},t.prototype.insert=function(t){for(var r=[],e=1;e<arguments.length;e++)r[e-1]=arguments[e];return this.insertArray(t,r)},t.prototype.insertArray=function(t,r){var e=new Uint8Array(this._data.length+r.length);return e.set(this._data.subarray(0,t)),e.set(new Uint8Array(r),t),e.set(this._data.subarray(t),t+r.length),this._data=e,this._length+=r.length,this},t.prototype.insertByte=function(t,r){return this.insertArray(t,[r])},t.prototype.getUint8Array=function(){return this.sliceUint8Array(0,this._length)},t.prototype.sliceUint8Array=function(t,r){return(void 0===r||r>this._length)&&(r=this._length),this._data.slice(t,r)},t}();r.a=n},8:function(t,r,e){"use strict";e.r(r);var n;!function(t){t.BK10="BK10",t.BK11="BK11",t.TURBO="TURBO"}(n||(n={}));var o,i=384,a=[208,208,48,48],u=[208,208,208,208,48,48,48,48],s=[200,200,48,48],c=[200,200,200,200,200,200,200,200,48,48,48,48,48,48,48,48],f=[200,200,48],d=[200,200,48,48],h=21428,l=25e3,p=4e4,y=4096,v=10,g=200,_=1024,b=2,A=[208,48,48],B=[208,208,208,48,48],w=[200,200,200,48,48,48],O=[200,200,200,200,200,200,200,200,200,200,200,200,48,48,48,48,48,48,48,48,48,48,48,48],m=[496,194,512,512,512,512,512,512,512,512,5569,16384,5568,10306,4191,210,4127,212,5572,582,5573,256,5397,766,2562,5571,256,5572,65486,5573,32,12620,766,12620,1022,2690,12620,765,32454,35330,194,3266,3266,95,256,2563,12620,1022,2691,12620,765,57475,32769,2819,8407,6,1780,5571,8,4290,12620,1022,12620,776,12620,774,12620,772,12620,766,177,257,161,35849,32399,2689,32274,6085,210,4419,6084,212,58820,2,2562,54594,24704,2880,32517,8225,514,95,751,5569,33244,5570,6,34832,0],U=22,W=26,j=751,S=e(0),x=e(1),L=(o=function(t,r){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var e in r)r.hasOwnProperty(e)&&(t[e]=r[e])})(t,r)},function(t,r){function e(){this.constructor=t}o(t,r),t.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e)}),P=function(t){function r(){return null!==t&&t.apply(this,arguments)||this}return L(r,t),r.prototype.pushWord=function(t){return this.pushArray([255&t,t>>8&255])},r.prototype.insertWord=function(t,r){return this.insertArray(t,[0,0]),this.setWord(t,r)},r.prototype.getWord=function(t){return this._data[t]+(this._data[t+1]<<8)},r.prototype.setWord=function(t,r){return this._data[t]=255&r,this._data[t+1]=r>>8&255,this},r.prototype.getCheckSum=function(t){void 0===t&&(t=0);for(var r=0,e=this._data,n=this._length,o=t;o<n;o++)(r+=e[o])>65535&&(r-=65536,r++);return r},r.prototype.setBit=function(t,r,e){return void 0===e&&(e=1),this._setBits(t,e,r,1)},r.prototype.setBitsPair=function(t,r,e){return void 0===e&&(e=3),this._setBits(t,e,2*r,3)},r.prototype._setBits=function(t,r,e,n){var o=e>7,i=o?this.getWord(t):this.getByte(t);return i&=~(n<<e),i|=r<<e,o?this.setWord(t,i):this.setByte(t,i),this},r}(x.a);function R(t,r,e){void 0===e&&(e=!1);for(var n=new x.a([],{expandBytes:16384}),o=T(n,!!e),i=0;i<y;i++)o(s);o(c),o(u);for(i=0;i<v;i++)o(s);o(c),o(u);var h=r?f:d,l=t.length;for(i=0;i<l;i++){if(20===i){for(var p=0;p<v;p++)o(s);o(c),o(u)}else i===l-2&&(h=d);for(var _=t.getByte(i),b=1;b<255;b<<=1)o(h),o(_&b?u:a)}if(!e)for(i=0;i<g;i++)o(s);return n}function T(t,r){return void 0===r&&(r=!1),r?function(r){for(var e=0;e<r.length;e++)t.push(r[e],r[e])}:function(r){t.pushArray(r)}}var k="юабцдефгхийклмнопярстужвьызшэщчъЮАБЦДЕФГХИЙКЛМНОПЯРСТУЖВЬЫЗШЭЩЧЪ";function M(t,r,e,o){var i;void 0===o&&(o=!1),r=Object(S.a)(r);var a=e===n.TURBO,u=a?p:e===n.BK11?l:h;if(a){1&t.length&&t.push(0);var s=function(t){var r,e=new P(2*m.length);m.forEach((function(t,n){var o=2*n;e.setWord(o,t),r||t!==j||(r=o)}));var n=t.getWord(0);e.setWord(U,n);var o=t.getWord(2)+2;if(e.setWord(W,o),r){var i=void 0;if(n<512){var a=512-n+4-4;i=t.getWord(a)}else i=n;e.setWord(r,i)}return e}(t);i=R(s=C(s,r),!0,!0);var c=function(t){var r=new x.a([],{expandBytes:16384}),e=T(r),n=new P(t.sliceUint8Array(4)),o=n.getCheckSum();n.pushWord(o);for(var i=0;i<_;i++)e(w);for(e(O),i=0;i<n.length;i++)for(var a=n.getByte(i),u=1;u<255;u<<=1)e(a&u?B:A);for(i=0;i<b;i++)e(w);return r}(t);i.pushArray(c.getUint8Array())}else{i=R(C(t,r),o)}return function(t,r){var e=t.length,n=28+(8+e),o=1*r,i=[82,73,70,70,255&n,n>>8&255,n>>16&255,n>>24&255,87,65,86,69,102,109,116,32,16,0,0,0,1,0,1,0,255&r,r>>8&255,r>>16&255,r>>24&255,255&o,o>>8&255,o>>16&255,o>>24&255,1,0,8,0,100,97,116,97,255&e,e>>8&255,e>>16&255,e>>24&255],a=new Uint8Array(i.length+t.length);return a.set(i),a.set(t,i.length),a}(i.getUint8Array(),u)}function C(t,r){var e=new P(t.getUint8Array());r=r.substr(0,16).padEnd(16," "),e.insertArray(4,function(t){for(var r=[],e=0;e<t.length;e++){var n=t.charCodeAt(e);if(n<32)n=32;else if(n>127){var o=t[e],i=k.indexOf(o);n=i>-1?192+i:"Ё"===o?229:"ё"===o?197:32}r.push(n)}return r}(r));var n=e.getCheckSum(20);return e.pushWord(n),e}Array.from(document.querySelectorAll("[name=model]")).forEach((function(t){t.addEventListener("click",(function(){var t;t=this.value,z("#speedContainer").style.display=t===n.TURBO?"none":"block"}))})),$("#convertButton").addEventListener("click",(function(){if(E&&!E.error){D();var t=q.files[0],r=z("[name=model]:checked").value;if(r===n.TURBO&&E.address<i)return void F("Адрес загрузки меньше "+i.toString(8));var e=t.name.replace(/\.bin$/i,""),o=z("#speed").checked,a=M(E.binary,e,r,o);Object(S.d)(e+".wav",a)}}));var E,K=$("#error"),H=$("#address"),q=z("#file");function F(t){K.innerHTML=t+"<br><br>"}function D(){K.innerHTML=""}function $(t){return document.querySelector(t)}function z(t){return $(t)}q.addEventListener("change",(function(){D(),H.innerHTML="";var t=q.files[0];t?Object(S.b)(t).then((function(t){var r,e,n;(n=new P(t)).length<6?r="Слишком короткий bin-файл":(e=n.getWord(0),n.getWord(2)!==n.length-4&&(r="Файл не соответствует формату БК")),(E={binary:n,error:r,address:e}).error?F(E.error):function(t){H.innerHTML="Адрес загрузки файла: "+t.toString(8)+"<br><br>"}(E.binary.getWord(0))})):E=void 0}))}});
//# sourceMappingURL=wav-converter.js.map