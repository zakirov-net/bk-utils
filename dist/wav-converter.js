!function(t){var r={};function e(n){if(r[n])return r[n].exports;var o=r[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,e),o.l=!0,o.exports}e.m=t,e.c=r,e.d=function(t,r,n){e.o(t,r)||Object.defineProperty(t,r,{enumerable:!0,get:n})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,r){if(1&r&&(t=e(t)),8&r)return t;if(4&r&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(e.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&r&&"string"!=typeof t)for(var o in t)e.d(n,o,function(r){return t[r]}.bind(null,o));return n},e.n=function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(r,"a",r),r},e.o=function(t,r){return Object.prototype.hasOwnProperty.call(t,r)},e.p="",e(e.s=14)}([function(t,r,e){"use strict";function n(t,r){return t[r]+(t[r+1]<<8)}function o(t,r,e){t[r]=255&e,t[r+1]=e>>8&255}e.d(r,"a",(function(){return n})),e.d(r,"b",(function(){return o}))},function(t,r,e){"use strict";var n,o=e(3),i=e(0),a=(n=function(t,r){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var e in r)r.hasOwnProperty(e)&&(t[e]=r[e])})(t,r)},function(t,r){function e(){this.constructor=t}n(t,r),t.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e)}),u=function(t){function r(){return null!==t&&t.apply(this,arguments)||this}return a(r,t),r.prototype.pushWord=function(t){return this.pushArray([255&t,t>>8&255])},r.prototype.insertWord=function(t,r){return this.insertArray(t,[0,0]),this.setWord(t,r)},r.prototype.getWord=function(t){return Object(i.a)(this._data,t)},r.prototype.setWord=function(t,r){return Object(i.b)(this._data,t,r),this},r.prototype.getCheckSum=function(t){void 0===t&&(t=0);for(var r=0,e=this._data,n=this._length,o=t;o<n;o++)(r+=e[o])>65535&&(r-=65536,r++);return r},r.prototype.setBit=function(t,r,e){return void 0===e&&(e=1),this._setBits(t,e,r,1)},r.prototype.setBitsPair=function(t,r,e){return void 0===e&&(e=3),this._setBits(t,e,2*r,3)},r.prototype._setBits=function(t,r,e,n){var o=e>7,i=o?this.getWord(t):this.getByte(t);return i&=~(n<<e),i|=r<<e,o?this.setWord(t,i):this.setByte(t,i),this},r}(o.a);r.a=u},function(t,r,e){"use strict";function n(t){return new Promise((function(r){var e=new FileReader;e.onload=function(){r(e.result)},e.readAsDataURL(t)}))}function o(t){return new Promise((function(r){var e=new FileReader;e.onload=function(){r(e.result)},e.readAsArrayBuffer(t)}))}function i(t){return t.replace(/И\u0306/g,"Й").replace(/и\u0306/g,"й").replace(/Е\u0308/g,"Ё").replace(/е\u0308/g,"ё")}function a(t,r){var e=new Blob([r],{type:"application/octet-stream"});if(window.navigator&&window.navigator.msSaveOrOpenBlob)window.navigator.msSaveOrOpenBlob(e,t);else{var n=URL.createObjectURL(e),o=document.createElement("a");o.href=n,o.download=t,document.body.appendChild(o),o.click(),URL.revokeObjectURL(n),document.body.removeChild(o)}}e.d(r,"c",(function(){return n})),e.d(r,"b",(function(){return o})),e.d(r,"a",(function(){return i})),e.d(r,"d",(function(){return a}))},function(t,r,e){"use strict";Uint8Array.prototype.slice||Object.defineProperty(Uint8Array.prototype,"slice",{value:function(t,r){return new Uint8Array(Array.prototype.slice.call(this,t,r))}});var n=function(){function t(t,r){var e=(void 0===r?{}:r).expandBytes,n=void 0===e?256:e;this._data=new Uint8Array(t),this._length=this._data.length,this._expandBytes=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this._length},enumerable:!0,configurable:!0}),t.prototype.getByte=function(t){return this._data[t]},t.prototype.setByte=function(t,r){return this._data[t]=r,this},t.prototype.push=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return this.pushArray(t,!1)},t.prototype.pushOnce=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return this.pushArray(t,!0)},t.prototype.pushArray=function(t,r){var e=new Uint8Array(t),n=this._data;if(this._length+e.length>n.length){var o=r||e.length>this._expandBytes?e.length:this._expandBytes;(n=new Uint8Array(this._length+o)).set(this._data),this._data=n}return n.set(e,this._length),this._length+=e.length,this},t.prototype.insert=function(t){for(var r=[],e=1;e<arguments.length;e++)r[e-1]=arguments[e];return this.insertArray(t,r)},t.prototype.insertArray=function(t,r){var e=new Uint8Array(this._data.length+r.length);return e.set(this._data.subarray(0,t)),e.set(new Uint8Array(r),t),e.set(this._data.subarray(t),t+r.length),this._data=e,this._length+=r.length,this},t.prototype.insertByte=function(t,r){return this.insertArray(t,[r])},t.prototype.setArray=function(t,r){return this._data.set(r,t),this},t.prototype.getUint8Array=function(){return this.sliceUint8Array(0,this._length)},t.prototype.sliceUint8Array=function(t,r){return(void 0===r||r>this._length)&&(r=this._length),this._data.slice(t,r)},t}();r.a=n},function(t,r,e){"use strict";e.d(r,"a",(function(){return o})),e.d(r,"c",(function(){return i})),e.d(r,"b",(function(){return a}));var n="юабцдефгхийклмнопярстужвьызшэщчъЮАБЦДЕФГХИЙКЛМНОПЯРСТУЖВЬЫЗШЭЩЧЪ";function o(t){for(var r=[],e=0;e<t.length;e++){var o=t.charCodeAt(e);if(o<32)o=32;else if(o>127){var i=t[e],a=n.indexOf(i);o=a>-1?192+a:"Ё"===i?229:"ё"===i?197:32}r.push(o)}return r}function i(t){for(var r="",e=0;e<t.length;e++){var o=" ",i=t[e];i>32&&i<128?o=String.fromCharCode(i):i>=192&&i<=255&&(o=n[i-192]),r+=o}return r}function a(t){for(var r="",e=0;e<t.length;e++){var n=" ",o=t[e];o>=96&&(o&=-161),o>32&&o<96&&(n=String.fromCharCode(o)),r+=n}return r}},function(t,r,e){"use strict";e.d(r,"a",(function(){return o}));var n=e(1);function o(t){var r,e,o=new n.a(t);o.length<6?r="Слишком короткий bin-файл":(e=o.getWord(0),o.getWord(2)!==o.length-4&&(r="Файл не соответствует формату БК"));return{binary:o,error:r,address:e}}},,,,,,,,,function(t,r,e){"use strict";e.r(r);var n;!function(t){t.BK10="BK10",t.BK11="BK11",t.TURBO="TURBO"}(n||(n={}));var o=[208,208,48,48],i=[208,208,208,208,48,48,48,48],a=[200,200,48,48],u=[200,200,200,200,200,200,200,200,48,48,48,48,48,48,48,48],s=[200,200,48],c=[200,200,48,48],f=[208,48,48],d=[208,208,208,48,48],h=[200,200,200,48,48,48],l=[200,200,200,200,200,200,200,200,200,200,200,200,48,48,48,48,48,48,48,48,48,48,48,48],p=[496,194,512,512,512,512,512,512,512,512,5569,16384,5568,10306,4191,210,4127,212,5572,582,5573,256,5397,766,2562,5571,256,5572,65486,5573,32,12620,766,12620,1022,2690,12620,765,32454,35330,194,3266,3266,95,256,2563,12620,1022,2691,12620,765,57475,32769,2819,8407,6,1780,5571,8,4290,12620,1022,12620,776,12620,774,12620,772,12620,766,177,257,161,35849,32399,2689,32274,6085,210,4419,6084,212,58820,2,2562,54594,24704,2880,32517,8225,514,95,751,5569,33244,5570,6,34832,0],y=e(2),v=e(1);var g=e(3);function b(t,r,e){void 0===e&&(e=!1);for(var n=new g.a([],{expandBytes:16384}),f=_(n,!!e),d=0;d<4096;d++)f(a);f(u),f(i);for(d=0;d<10;d++)f(a);f(u),f(i);var h=r?s:c,l=t.length;for(d=0;d<l;d++){if(20===d){for(var p=0;p<10;p++)f(a);f(u),f(i)}else d===l-2&&(h=c);for(var y=t.getByte(d),v=1;v<255;v<<=1)f(h),f(y&v?i:o)}if(!e)for(d=0;d<200;d++)f(a);return n}function _(t,r){return void 0===r&&(r=!1),r?function(r){for(var e=0;e<r.length;e++)t.push(r[e],r[e])}:function(r){t.pushArray(r)}}var A=e(4);function B(t,r,e,o){var i;void 0===o&&(o=!1),r=Object(y.a)(r);var a=e===n.TURBO,u=a?4e4:e===n.BK11?25e3:21428;if(a){1&t.length&&t.push(0);var s=function(t){var r,e=new v.a(2*p.length);p.forEach((function(t,n){var o=2*n;e.setWord(o,t),r||751!==t||(r=o)}));var n=t.getWord(0);e.setWord(22,n);var o=t.getWord(2)+2;if(e.setWord(26,o),r){var i=void 0;if(n<512){var a=512-n+4-4;i=t.getWord(a)}else i=n;e.setWord(r,i)}return e}(t);i=b(s=O(s,r),!0,!0);var c=function(t){var r=new g.a([],{expandBytes:16384}),e=_(r),n=new v.a(t.sliceUint8Array(4)),o=n.getCheckSum();n.pushWord(o);for(var i=0;i<1024;i++)e(h);for(e(l),i=0;i<n.length;i++)for(var a=n.getByte(i),u=1;u<255;u<<=1)e(a&u?d:f);for(i=0;i<2;i++)e(h);return r}(t);i.pushArray(c.getUint8Array())}else{i=b(O(t,r),o)}return function(t,r){var e=t.length,n=28+(8+e),o=1*r,i=[82,73,70,70,255&n,n>>8&255,n>>16&255,n>>24&255,87,65,86,69,102,109,116,32,16,0,0,0,1,0,1,0,255&r,r>>8&255,r>>16&255,r>>24&255,255&o,o>>8&255,o>>16&255,o>>24&255,1,0,8,0,100,97,116,97,255&e,e>>8&255,e>>16&255,e>>24&255],a=new Uint8Array(i.length+t.length);return a.set(i),a.set(t,i.length),a}(i.getUint8Array(),u)}function O(t,r){var e=new v.a(t.getUint8Array());r=r.substr(0,16).padEnd(16," "),e.insertArray(4,Object(A.a)(r));var n=e.getCheckSum(20);return e.pushWord(n),e}var m=e(5);Array.from(document.querySelectorAll("[name=model]")).forEach((function(t){t.addEventListener("click",(function(){var t;t=this.value,P("#speedContainer").style.display=t===n.TURBO?"none":"block"}))})),L("#convertButton").addEventListener("click",(function(){if(w&&!w.error){x();var t=W.files[0],r=P("[name=model]:checked").value;if(r===n.TURBO&&w.address<384)return void S("Адрес загрузки меньше "+384..toString(8));var e=t.name.replace(/\.bin$/i,""),o=P("#speed").checked,i=B(w.binary,e,r,o);Object(y.d)(e+".wav",i)}}));var w,U=L("#error"),j=L("#address"),W=P("#file");function S(t){U.innerHTML=t+"<br><br>"}function x(){U.innerHTML=""}function L(t){return document.querySelector(t)}function P(t){return L(t)}W.addEventListener("change",(function(){x(),j.innerHTML="";var t=W.files[0];t?Object(y.b)(t).then((function(t){var r;(w=Object(m.a)(t)).error?S(w.error):(r=w.binary.getWord(0),j.innerHTML="Адрес загрузки файла: "+r.toString(8)+"<br><br>")})):w=void 0}))}]);
//# sourceMappingURL=wav-converter.js.map