# Утилиты для БК-0010(-01), БК-0011(М)

Однофайловые приложения, работающие прямо в браузере (даже в IE11!), призванные помочь в работе с советскими компьютерами серии БК.

Пользоваться можно здесь: https://zakirov-net.github.io/bk-utils/

## Конвертер .bin-файлов БК в .wav-файлы для загрузки через магнитофонный вход (wav-converter.html)

Собственно, из названия все понятно: берем .bin-файл с БКшной программой, выставляем нужные параметры и получаем звуковой файл, который можно подать на магнитофонный вход БК и загрузить программу в компьютер. Алгоритм разработан Manwe/SandS, размещено здесь: http://thesands.ru/bk0010/wav-converter/  

## Конвертирование картинки для БК (png, gif) в ассемблерный код (image-to-asm.html)

Конвертер сделан по заказу Adam Bazaroff, помогает преобразовывать картинку, нарисованную в Photoshop с соблюдением палитры БК, в ассемблерный код (данные). Можно обрезать картинку, делая спрайт нужного размера. В этой утилитке попробовал использовать Vue.js, знаю, что кривовато, и вообще еще предстоит сильно причесать код и разбить на компоненты.

## Упаковщик .bin-файлов БК в образ загружаемого диска MK-DOS (bkd.html)

Выбираем БКшные bin-файлы и скачиваем образ диска (.bkd) в фомате MK-DOS с выбранными бинарниками на нем и загрузчиком операционной системы. В будущем планируется поддержка других ОС, например, ANDOS и CSI-DOS 

### Использование упаковщика из командной строки

Для работы упаковщика необходимо наличие в системе Node.js. Если он еще не установлен, нужно скачать последнюю LTS-версию с сайта https://nodejs.org (После установки в Windows может понадобиться перезагрузка компьютера). 

Далее устанавливаем данный npm-пакет глобально командой:
```
npm install -g bk-utils
```

Теперь можно пользоваться. Допустим, у нас есть БК-шный файл example.bin и нужно упаковать его в образ диска, выполняем:
```
bk-utils-bkd example.bin
```
В результате получим файл example.bkd.

Более сложный случай: хотим запаковать все файлы с расширениями .bin и .ovl в текущей папке в образ с именем mydisk.bkd, выполняем:
```
bk-utils-bkd --out mydisk.bkd *.bin *.ovl
```
При этом на БК-шном диске у файлов .bin отрезается расширение, а .ovl файлы записываются как есть. Если не задавать опцию --out, то имя образа возьмется из имени первого удачно сохранившегося в образе файла и к нему добавится расширение .bkd.

Обновить npm-пакет с утилитой можно так:
```
npm update -g bk-utils
```
 
## Сборка проекта из исходников

Код скриптов собирается из typescript-файлов. Поэтому, если есть желание что-то исправить, сначала устанавливаем Node.js, затем в корне проекта набираем:
```
npm install
``` 
И ждем окончания установки пакетов. Затем для сборки js запускаем команду:
```
npm run build
```
Или для автоматической сборки после редактирования:
```
npm run watch
```
Прогон тестов:
```
npm run test
```
Для сборки утилит командной строки:
```
npm run build-cli
```
Для их автоматической сборки после редактирования:
```
npm run watch-cli
```

## TODO

- Нормально задокументировать код
- Перевести везде интерфейс на Vue.js
- Оформить функционал утилит в виде nodejs-скриптов для запуска из командной строки (упаковщик в образ диска уже есть)
- Написать побольше автоматических тестов
- Написать новые утилиты и доработать функционал существующих :)

Мой сайт: www.zakirov.net

Предложения и замечания - на e-mail: lenar@zakirov.net